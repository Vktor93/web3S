(function(){var e=function(e,n){function o(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("modules/clean/bolt",["jquery","external/underscore","modules/clean/bolt_nodeps","modules/core/exception"],function(t,n,o,r){var i,s;return i=(function(o){function i(e,o,s){i.__super__.constructor.call(this,e,o,s,"bolt.dropbox.com",t.ajax,n,r)}return e(i,o),i})(o.BoltClient),s=(function(o){function i(e,o,s){i.__super__.constructor.call(this,e,o,s,"thunder.dropbox.com",t.ajax,n,r)}return e(i,o),i})(o.ThunderClient),{BoltClient:i,ThunderClient:s,ChannelId:o.ChannelId,SignedChannelState:o.SignedChannelState,Payload:o.Payload,ChannelPayloads:o.ChannelPayloads}})}).call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function o(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("modules/clean/bolt_nodeps",[],function(){var n,o,r,i,s,l,a,u,p,d,c;return n=1e3,o=3e5,a="/2/notify/subscribe",u="/2/payloads/subscribe",s=(function(){function e(e,t){this.app_id=e,this.unique_id=t}return e})(),d=(function(){function e(e,t,n,o){this.app_id=e,this.unique_id=t,this.revision=n,this.token=o}return e})(),p=(function(){function e(e,t){this.revision=e,this.payload=t}return e})(),l=(function(){function e(e,t){this.channel_state=e,this.payloads=t}return e})(),r=(function(){function t(t,o,r,i,s,l,a){this._update_callback=o,this._refresh_callback=r,this._hostname=i,this._ajax=s,this._u=l,this._exclog=null!=a?a:null,this._handle_poll_error=e(this._handle_poll_error,this),this._handle_poll_success=e(this._handle_poll_success,this),this._must_find_state=e(this._must_find_state,this),this._long_poll=e(this._long_poll,this),this._find_state=e(this._find_state,this),this._signed_channel_states=[],this._started=!1,this._sequence_num=0,this._backoff_window=n,this._additional_headers={},this._timeout_id=null,this.update_states(t)}return t.prototype._encode_channel_state=function(e){return{channel_id:{app_id:e.app_id,unique_id:e.unique_id},revision:e.revision,token:e.token}},t.prototype._decode_channel_state=function(e){return new d(e.channel_id.app_id,e.channel_id.unique_id,e.revision,e.token)},t.prototype._decode_channel_id=function(e){return new s(e.app_id,e.unique_id)},t.prototype._compare_revisions=function(e,t){var n,o,r;return n=Math.max(e.length,t.length),o=Array(n-e.length+1).join("0")+e,r=Array(n-t.length+1).join("0")+t,o<r?-1:o>r?1:0},t.prototype._find_state=function(e){return this._u.find(this._signed_channel_states,(function(t){return function(n){return t._u.isEqual(e,n.channel_id)}})(this))},t.prototype.update_states=function(e){var t,n,o,r,i;for(i=[],t=0,n=e.length;t<n;t++)r=e[t],r=this._encode_channel_state(r),o=this._find_state(r.channel_id),null==o?i.push(this._signed_channel_states.push(r)):this._compare_revisions(r.revision,o.revision)>=0?(o.revision=r.revision,i.push(o.token=r.token)):i.push(void 0);return i},t.prototype.start=function(){if(!this._started)return this._started=!0,this._long_poll()},t.prototype.unsubscribe=function(){return this._started=!1,null!=this._long_poll_xhr&&this._long_poll_xhr.abort(),this._long_poll_xhr=null,window.clearTimeout(this._timeout_id),this._timeout_id=null},t.prototype._long_poll=function(){var e;return this._sequence_num++,e=this._sequence_num,this._long_poll_xhr=this._ajax({url:this._subscribe_url(),type:"POST",data:JSON.stringify({channel_states:this._signed_channel_states}),contentType:"application/json; charset=utf-8",headers:this._additional_headers,dataType:"json",timeout:12e4,success:(function(t){return function(n,o,r){return t._handle_poll_success(e,n,o,r)}})(this),error:(function(t){return function(n,o){return t._handle_poll_error(e,n,o)}})(this),xhrFields:{withCredentials:!0}})},t.prototype._must_find_state=function(e){var t,n,o;return n=this._find_state(e),null==n&&(t="Bolt returned unknown channel id "+e,null!=(o=this._exclog)&&o.reportStack(t)),n},t.prototype._handle_poll_data=function(){var e,t;return e="Method must be implemented.",null!=(t=this._exclog)?t.reportStack(e):void 0},t.prototype._subscribe_url=function(){return"https://"+this._hostname+this._subscribe_endpoint()},t.prototype._subscribe_endpoint=function(){var e,t;return e="Method must be implemented.",null!=(t=this._exclog)?t.reportStack(e):void 0},t.prototype._handle_poll_success=function(e,t,o,r){var i,s,l;if(e===this._sequence_num&&(this._long_poll_xhr=null,this._started))return l=this._handle_poll_data(t,o,r),l.length>0&&this._u.defer(this._update_callback,l),(null!=(s=t.invalid_channels)?s.length:void 0)>0?void this._u.defer(this._refresh_callback,function(){var e,n,o,r;for(o=t.invalid_channels,r=[],e=0,n=o.length;e<n;e++)i=o[e],r.push(this._decode_channel_id(i));return r}.call(this)):(this._backoff_window=n,this._timeout_id=window.setTimeout(this._long_poll,0))},t.prototype._handle_poll_error=function(e,t,n){var r;if(e===this._sequence_num&&(this._long_poll_xhr=null,this._started))return r=Math.random()*this._backoff_window,this._backoff_window=Math.min(2*this._backoff_window,o),window.setTimeout(this._long_poll,r)},t})(),i=(function(n){function o(t,n,r,i,s,l,a){null==a&&(a=null),this._handle_poll_data=e(this._handle_poll_data,this),o.__super__.constructor.call(this,t,n,r,i,s,l,a)}return t(o,n),o.prototype._subscribe_endpoint=function(){return a},o.prototype._handle_poll_data=function(e,t,n){var o,r,i,s,l,a;if(a=[],null!=e.channel_states)for(l=e.channel_states,o=0,r=l.length;o<r;o++)s=l[o],i=this._must_find_state(s.channel_id),this._compare_revisions(s.revision,i.revision)>0&&(i.revision=s.revision,i.token=s.token,a.push(this._decode_channel_state(s)));return a},o})(r),c=(function(n){function o(t,n,r,i,s,l,a){null==a&&(a=null),this._handle_poll_data=e(this._handle_poll_data,this),o.__super__.constructor.call(this,t,n,r,i,s,l,a)}var r;return t(o,n),r="X-Bolt-Session",o.prototype.unsubscribe=function(){return this._additional_headers[r]=null,o.__super__.unsubscribe.call(this)},o.prototype._subscribe_endpoint=function(){return u},o.prototype._handle_poll_data=function(e,t,n){var o,i,s,a,u,d,c,h,_,f,m,b,y;if(y=[],this._additional_headers={},this._additional_headers[r]=n.getResponseHeader(r),null!=e.channel_payloads)for(m=e.channel_payloads,s=0,u=m.length;s<u;s++){for(o=m[s],h=o.channel_state,c=this._must_find_state(h.channel_id),i=this._decode_channel_state(o.channel_state),f=[],b=o.payloads,a=0,d=b.length;a<d;a++)_=b[a],this._compare_revisions(_.revision,c.revision)>0&&f.push(new p(_.revision,_.payload));f.length>0&&y.push(new l(i,f)),this._compare_revisions(h.revision,c.revision)>0&&(c.revision=h.revision,c.token=h.token)}return y},o})(r),{BoltClient:i,ThunderClient:c,ChannelId:s,SignedChannelState:d,Payload:p,ChannelPayloads:l}})}.call(this),define("modules/clean/photos/thumb_loading/generic_thumb_store",["require","exports","modules/clean/photos/thumb_loading/http2_thumb_loader","modules/core/exception"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(e,t){this.loaderBatches=!1,this.thumbUrlToData={},this.callbackByRequestId={},this.loaderBatches=!!t,this.thumbLoader=e?e:new n.Http2ThumbLoader}return e.prototype.is_batching=function(){return this.loaderBatches},e.prototype.bind_url=function(e,t){var n=this;if(o.assert(!!t.onSuccess,"missing onSuccess handler"),this.thumbUrlToData[e])return t.onRequest&&t.onRequest(!0),t.onSuccess(!0),null;var r=this.thumbLoader.get_request_id();this.callbackByRequestId[r]=t;var i=function(){var e=n.callbackByRequestId[r];e&&e.onRequest&&e.onRequest(!1)},s=function(t){n.thumbUrlToData[e]=t;var o=n.callbackByRequestId[r];o&&o.onSuccess(!1)},l=function(){var e=n.callbackByRequestId[r];e&&e.onError&&e.onError()},a=function(){return n.callbackByRequestId.hasOwnProperty(r)};return this.thumbLoader.load_image(e,r,i,s,l,a),r},e.prototype.unbind_url=function(e){e&&(delete this.callbackByRequestId[e],this.thumbLoader.cancel_thumb(e))},e.prototype.get_thumb=function(e){return this.thumbUrlToData[e]?this.thumbUrlToData[e]:null},e})();t.GenericThumbStore=r}),define("modules/clean/photos/thumb_loading/http2_thumb_loader",["require","exports","modules/clean/photos/thumb_loading/utils"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(){this.http2RequestId=0}return e.prototype.get_request_id=function(){return this.http2RequestId+=1,this.http2RequestId.toString()},e.prototype.load_image=function(e,t,o,r,i,s){o(),n.load_individual_image(e,1,r,i,s)},e.prototype.cancel_thumb=function(e){},e})();t.Http2ThumbLoader=o}),define("modules/clean/photos/thumb_loading/utils",["require","exports"],function(e,t){"use strict";function n(e,t,n,o,r){var i=new Image;i.onload=function(){return n(e)},i.onerror=function(){t>0&&r()?(t-=1,i.src=e):o()},i.src=e}Object.defineProperty(t,"__esModule",{value:!0}),t.load_individual_image=n}),function(){define("modules/clean/react/bubble_menu",["jquery","external/classnames","external/react","external/react-dom","external/underscore","modules/clean/keycode","modules/clean/react/bubble_dropdown_v2"],function(e,t,n,o,r,i,s){var l,a,u,p,d,c,h,_,f,m;return h=i.KeyCode,m=n.DOM,f=n.createElement,_=function(e,t,n){var o,r;if(o=e[t].type,o!==a&&o!==d&&o!==u)return r=(null!=o?o.displayName:void 0)||e[t],new Error("Expected menu items to be instances of BubbleMenuItem, not "+r+".")},p={DEFAULT:1,CHECKBOX:2,RADIO:3},a=n.createClass({displayName:"BubbleMenuItem",propTypes:{onClick:n.PropTypes.func,href:n.PropTypes.string,target:n.PropTypes.string,disabled:n.PropTypes.bool,closeOnClick:n.PropTypes.bool,closeFunc:n.PropTypes.func,className:n.PropTypes.string,onMouseEnter:n.PropTypes.func,onMouseLeave:n.PropTypes.func,itemType:n.PropTypes.oneOf(r.values(p)),checked:n.PropTypes.bool},getDefaultProps:function(){return{onClick:r.noop,href:"#",target:null,disabled:!1,closeOnClick:!0,closeFunc:r.noop,className:null,onMouseEnter:r.noop,onMouseLeave:r.noop,itemType:p.DEFAULT,checked:null}},_handleMouseEnter:function(t){if(null!=this.refs.item)return e(o.findDOMNode(this.refs.item)).closest(".bubble-menu").removeClass("bubble-menu--keyboard"),this.props.onMouseEnter(t)},_handleClick:function(e){return this.props.disabled?(e.preventDefault(),e.stopPropagation()):"#"===this.props.href&&(e.preventDefault(),this.props.onClick(e),this.props.closeOnClick)?this.props.closeFunc():void 0},_getRole:function(){switch(this.props.itemType){case p.CHECKBOX:return"menuitemcheckbox";case p.RADIO:return"menuitemradio";default:return"menuitem"}},_getAriaChecked:function(){switch(this.props.itemType){case p.CHECKBOX:case p.RADIO:return this.props.checked||!1;default:return null}},renderContents:function(){var e;return e={"bubble-menu-item":!0,"bubble-menu-item--disabled":this.props.disabled,"bubble-menu-item--checked":this.props.checked},m.a({ref:"item",role:this._getRole(),className:t(e),href:this.props.href,target:this.props.target,onClick:this._handleClick,onMouseEnter:this._handleMouseEnter,onMouseLeave:this.props.onMouseLeave,"aria-disabled":this.props.disabled,"aria-checked":this._getAriaChecked()},this.props.children)},render:function(){return m.li({role:"presentation",className:t("bubble-menu-item-wrapper",this.props.className)},this.renderContents())}}),a.TYPES=p,d=n.createClass({displayName:"BubbleMenuSeparator",propTypes:{className:n.PropTypes.string},getDefaultProps:function(){return{className:"bubble-menu-item-separator"}},render:function(){return m.li({role:"separator",className:this.props.className},this.props.children)}}),u=n.createClass({displayName:"BubbleMenuItemGroup",props:{items:n.PropTypes.arrayOf(_).isRequired,closeFunc:n.PropTypes.func},render:function(){var e,t;return 0===this.props.items.length?null:m.li({className:"bubble-menu-item-group",role:"presentation"},m.ul({className:"bubble-menu-item-group u-unlist u-trim-padding",role:"group"},function(){var o,r,i,s,l;for(i=this.props.items,l=[],e=o=0,r=i.length;o<r;e=++o)t=i[e],l.push(n.cloneElement(t,{closeFunc:this.props.closeFunc,key:null!=(s=t.key)?s:e}));return l}.call(this)))}}),l=n.createClass({displayName:"BubbleMenu",propTypes:r.extend({},s.propTypes,{headerContent:n.PropTypes.element,items:n.PropTypes.arrayOf(_).isRequired,onShowDropdown:n.PropTypes.func,targetButton:function(e,t,n){var o;if("button"!==(null!=(o=e.targetButton)?o.type:void 0))return new Error("BubbleDropdown's targetButton must be a `<button>`, found: "+e[t].type)}}),showMenu:function(){var e,t;return null!=(e=this.refs.bubble)&&null!=(t=e.getWrappedComponent())?t.showDropdown():void 0},hideMenu:function(){var e,t;return null!=(e=this.refs.bubble)&&null!=(t=e.getWrappedComponent())?t.hideDropdown():void 0},_onShowBubbleMenu:function(){var t;if(null!=this.refs.menu&&null!=this.refs.bubble)return this.$menu=e(o.findDOMNode(this.refs.menu)),this.$menuitems=this.$menu.find('*[role="menuitem"],*[role="menuitemcheckbox"],*[role="menuitemradio"]'),this.$menu.addClass("bubble-menu--keyboard"),"function"==typeof(t=this.props).onShowDropdown?t.onShowDropdown():void 0},_onKeyDown:function(e){return this.$menu.addClass("bubble-menu--keyboard"),e.keyCode===h.DOWN?(this._focusNext(e.target),e.preventDefault(),e.stopPropagation()):e.keyCode===h.UP?(this._focusPrevious(e.target),e.preventDefault(),e.stopPropagation()):void 0},_onKeyPress:function(e){var t,n,o,r,i,s,l,a,u,p,d,c;for(this.$menu.addClass("bubble-menu--keyboard"),i=null!=(a=e.which)?a:e.keyCode,r=String.fromCharCode(i).toLowerCase(),u=this.$menuitems,c=[],n=o=0,s=u.length;o<s;n=++o){if(l=u[n],t=null!=(p=l.textContent)&&null!=(d=p[0])?d.toLowerCase():void 0,t===r&&n>this.$menuitems.index(e.target)){l.focus(),e.stopPropagation();break}c.push(void 0)}return c},_focusPrevious:function(e){var t;return t=this.$menuitems.index(e),t=t===-1||0===t?this.$menuitems.length-1:t-1,this.$menuitems.get(t).focus()},_focusNext:function(e){var t;return t=this.$menuitems.index(e),t=t===-1||t===this.$menuitems.length-1?0:t+1,this.$menuitems.get(t).focus()},render:function(){var e,t,o;return this.props.targetButton&&(o=f(c,{ref:"targetButton",childProps:{"aria-haspopup":!0}},this.props.targetButton)),f(s,r.extend({},this.props,{ref:"bubble",shouldTrapKeyboardFocus:!0,onShowDropdown:this._onShowBubbleMenu,targetButton:o}),m.div({},this.props.headerContent),m.ul({role:"menu",ref:"menu",className:"bubble-menu",onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress},function(){var o,r,i,s,l;for(i=this.props.items,l=[],e=o=0,r=i.length;o<r;e=++o)t=i[e],l.push(n.cloneElement(t,{closeFunc:this.hideMenu,key:null!=(s=t.key)?s:e}));return l}.call(this)))}}),c=n.createClass({displayName:"BubbleMenuTargetButtonWrapper",propTypes:{childProps:n.PropTypes.object},render:function(){return n.cloneElement(this.props.children,this.props.childProps)}}),l.POSITIONS=s.POSITIONS,{BubbleMenuItem:a,BubbleMenuSeparator:d,BubbleMenuItemGroup:u,BubbleMenu:l}})}.call(this),define("modules/clean/react/file_uploader/file_uploader",["require","exports","tslib","external/react","modules/core/exception"],function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=null,s=(function(t){function s(e){var n=t.call(this,e)||this;return n.path=n.props.initialPath?n.props.initialPath:"/",n.state={fileUploader:void 0,uploaderStore:void 0,uploaderActions:void 0},n.props.loadOnRender&&s.requireFileUploader({}),i?r.reportStack("Only one FileUploader component may be rendered to the page at any time.You have tried to instantiate multiple uploaders.",{severity:r.SEVERITY.CRITICAL}):i=n,n}return n.__extends(s,t),s.requireFileUploader=function(t){var n=t.modalType,o=t.enableBrowseButton;e(["modules/clean/react/file_uploader/uploader_new","modules/clean/react/file_uploader/store","modules/clean/react/file_uploader/actions"],function(e,t,r){i&&(i.setAsyncRequiredUploaderModules(e,r,t),n&&s.showModal(n),"boolean"==typeof o&&s.setBrowseButton(o))})},s.prototype.setAsyncRequiredUploaderModules=function(e,t,n){var o=e.FileUploader,r=n.UploaderStore,i=t.UploaderActions;this.setState({uploaderStore:r,uploaderActions:i}),this.setState({fileUploader:o}),this.props.needToSetStoreValues&&(void 0!==this.user&&i.setUser({user:this.user}),i.setPath({path:this.path}))},s.prototype.componentWillUnmount=function(){i=null},s.loadCoreComponent=function(){i&&i.state.fileUploader||(e.defined("modules/clean/react/file_uploader/uploader"),s.requireFileUploader({}))},s.isCoreComponentDefined=function(){return!!i&&!!i.state.fileUploader},s.setPathAndPermissions=function(e){i&&i.state.uploaderActions&&i.state.uploaderActions.setPath(e)},s.setPath=function(e){i&&(i.state.uploaderActions?i.state.uploaderActions.setPath({path:e}):(e||(e="/"),i.path=e))},s.setUser=function(e){i&&(i.state.uploaderActions?i.state.uploaderActions.setUser({user:e}):i.user=e?e:void 0)},s.showModal=function(e){i&&(i.refs.fileUploader?e&&"regular"!==e?"out-of-quota"===e?i.refs.fileUploader.showOOQModal():"team-onboarding"===e&&i.refs.fileUploader.showModalWithTeamOnboarding():i.refs.fileUploader.showModal():(e=e||"regular",s.requireFileUploader({modalType:e})))},s.setBrowseButton=function(e){i&&(i.refs.fileUploader?i.refs.fileUploader.setBrowseButton(e):s.requireFileUploader({enableBrowseButton:e}))},s.isDraggingFilesHelper=function(e){if(!i)return!1;if(!i.state.uploaderStore)return!1;var t=i.state.uploaderStore;return!!t.numDraggingFiles()&&(e?t.isInternalTransfer():!t.isInternalTransfer())},s.isDraggingInternalFiles=function(){return s.isDraggingFilesHelper(!0)},s.isDraggingExternalFiles=function(){return s.isDraggingFilesHelper(!1)},s.isUploadModalOpen=function(){return!!i&&(!!i.state.uploaderStore&&i.state.uploaderStore.isUploadModalOpen())},s.prototype.render=function(){if(!this.state.fileUploader)return o.createElement("div",null);var e=this.props,t=e.onAllFileUploadsComplete,n=e.sendNS,r=e.onFileUploadComplete,i=e.onModalDismissed,s=e.clickOutToClose,l=e.dragAndDropEnabled,a=e.shouldShowDestinationLink,u=e.expSubgrowthProNearquotaUploadModal,p=e.onViewFiles,d=this.state.fileUploader;return o.createElement(d,{ref:"fileUploader",key:1,sendNS:n,onFileUploadComplete:r,onAllFileUploadsComplete:t,onModalDismissed:i,onViewFiles:p,clickOutToClose:s,dragAndDropEnabled:l,shouldShowDestinationLink:a,expSubgrowthProNearquotaUploadModal:u})},s})(o.Component);t.FileUploaderController=s}),define("modules/clean/react/file_uploader/upload_button",["require","exports","tslib","external/spectrum/button","external/spectrum/tertiary_link","modules/clean/web_timing_logger","external/react","modules/clean/react/file_uploader/file_uploader"],function(e,t,n,o,r,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){i.waitForTTI().then(function(){return l.FileUploaderController.setBrowseButton(!0)})},t.prototype.componentWillUnmount=function(){i.waitForTTI().then(function(){return l.FileUploaderController.setBrowseButton(!1)})},t.prototype.renderPrimaryButton=function(){return s.createElement(o.Button,{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick,variant:"primary"},this.props.children)},t.prototype.renderTertiaryLink=function(){return s.createElement(r.TertiaryLink,{icon:this.props.iconName,onClick:this.props.handleClick,disabled:this.props.disabled,className:this.props.className},this.props.children)},t.prototype.renderCMButton=function(){return s.createElement("button",{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick},this.props.children)},t.prototype.render=function(){return"primary"===this.props.variant?this.renderPrimaryButton():"CM"===this.props.variant?this.renderCMButton():this.renderTertiaryLink()},t})(s.PureComponent);t.UploadButton=a}),define("modules/clean/sharing/wizard/async_wizard_modals",["require","exports"],function(e,t){"use strict";function n(t){e(["modules/clean/sharing/wizard/wizard_modals"],t)}function o(e,t,o,r){n(function(n){n.shareExistingFolder(e,t,o,r)})}function r(e,t){n(function(n){var o=n.showShareAFolderWizardModal(e);t&&t(o)})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShareExistingFolder=o,t.asyncShowShareAFolderWizardModal=r});
//# sourceMappingURL=pkg-browse-core.min.js-vflEPZjCX.map