@model WebGrupo3S.Models.Documento


<div class="panel box box-primary">
    <div class="box-header with-border">
        <h3 class="box-title">Crear Documento</h3>
    </div>
    <div class="panel-body">
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()
            <div class="row">
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="col-sm-12">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Empresa</label>
                            @Html.EditorFor(model => model.dm_empresa, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.dm_empresa, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>Sucursal</label>
                            @Html.EditorFor(model => model.dm_IdSucursal, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.dm_IdSucursal, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label for="mes">Mes</label>
                            <select id="mes" class="form-control seleccionar" name="mes" required>
                                <option value="0">Seleccionar</option>
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <option value="3">Marzo</option>
                                <option value="4">Abril</option>
                                <option value="5">Mayo</option>
                                <option value="6">Junio</option>
                                <option value="7">Julio</option>
                                <option value="8">Agosto</option>
                                <option value="9">Septiembre</option>
                                <option value="10">Octubre</option>
                                <option value="11">Noviembre</option>
                                <option value="12">Diciembre</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label for="anio">Año</label>
                            <select id="anio" class="form-control seleccionar" name="anio" required>
                                <option value="0">Seleccionar</option>
                                <option value="2017">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                                <option value="2026">2026</option>
                                <option value="2027">2027</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-1">
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button type="button" id="btn_iniciar" class="btn btn-primary btn-as-block"><i class="fa fa-arrow-circle-right"></i> Iniciar Documento</button>
                        </div>
                    </div>
                </div>
            </div>
        }

    </div>
</div>

<a href="@Url.Action("Index","Documentoes")" class="btn btn-info"><i class="fa fa-arrow-circle-left"></i><span> Regresar</span></a>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">
        $(document).ready(function () {
            $("#dm_IdSucursal").TouchSpin({
                verticalbuttons: true
            });

            $(".seleccionar").select2({
                language: {
                    noResults: function () {
                        return "No hay resultado";
                    }
                }                
            });

            //click para cargar vista de inicio de factura
            $("#btn_iniciar").click(function (event) {
                event.preventDefault();
                
                $.ajax({
                    url: '@Url.Action("CargaDoc","Documentoes")',
                    type: 'POST',
                })
                .done(function (response) {
                    //console.log(response);
                    $(".panel-body").append(response);
                })
                .fail(function (response) {
                    //console.log(response);
                    $(".panel-body").append(response);
                });
            });
        });
    </script>
}
